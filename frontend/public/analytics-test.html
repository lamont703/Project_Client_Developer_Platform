<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Analytics Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }

        .test-button:hover {
            background: #0056b3;
        }

        .result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }

        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        #results {
            margin-top: 20px;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-success {
            background: #28a745;
        }

        .status-error {
            background: #dc3545;
        }

        .status-warning {
            background: #ffc107;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üîç Google Analytics Test Page</h1>
        <p>This page helps you test if Google Analytics is working properly in your environment.</p>

        <div class="test-section">
            <h3>üìä Analytics Status</h3>
            <div id="status"></div>
        </div>

        <div class="test-section">
            <h3>üß™ Manual Tests</h3>
            <button class="test-button" onclick="testPageView()">Test Page View</button>
            <button class="test-button" onclick="testCustomEvent()">Test Custom Event</button>
            <button class="test-button" onclick="testUserInteraction()">Test User Interaction</button>
            <button class="test-button" onclick="testFormSubmission()">Test Form Submission</button>
            <button class="test-button" onclick="runAllTests()">Run All Tests</button>
        </div>

        <div class="test-section">
            <h3>üîß Debug Information</h3>
            <button class="test-button" onclick="showDebugInfo()">Show Debug Info</button>
            <button class="test-button" onclick="clearResults()">Clear Results</button>
        </div>

        <div id="results"></div>
    </div>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BS2Y73PXX8"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-BS2Y73PXX8');
    </script>

    <script>
        let testResults = [];

        function addResult(message, type = 'info') {
            const resultsDiv = document.getElementById('results');
            const resultDiv = document.createElement('div');
            resultDiv.className = `result ${type}`;

            const statusClass = type === 'success' ? 'status-success' :
                type === 'error' ? 'status-error' :
                    type === 'warning' ? 'status-warning' : 'status-success';

            resultDiv.innerHTML = `
                <span class="status-indicator ${statusClass}"></span>
                <strong>${new Date().toLocaleTimeString()}:</strong> ${message}
            `;
            resultsDiv.appendChild(resultDiv);

            testResults.push({ message, type, timestamp: new Date() });
        }

        function checkAnalyticsStatus() {
            const statusDiv = document.getElementById('status');
            let statusHTML = '';

            // Check if gtag is available
            if (typeof window.gtag === 'function') {
                statusHTML += '<div class="result success">‚úÖ Google Analytics (gtag) is loaded</div>';
            } else {
                statusHTML += '<div class="result error">‚ùå Google Analytics (gtag) is not loaded</div>';
            }

            // Check if dataLayer exists
            if (Array.isArray(window.dataLayer)) {
                statusHTML += '<div class="result success">‚úÖ Data layer is available</div>';
            } else {
                statusHTML += '<div class="result error">‚ùå Data layer is not available</div>';
            }

            // Check tracking ID
            const hasConfig = window.dataLayer && window.dataLayer.some(item =>
                item[0] === 'config' && item[1] === 'G-BS2Y73PXX8'
            );
            if (hasConfig) {
                statusHTML += '<div class="result success">‚úÖ Tracking ID G-BS2Y73PXX8 is configured</div>';
            } else {
                statusHTML += '<div class="result error">‚ùå Tracking ID G-BS2Y73PXX8 is not configured</div>';
            }

            // Check for ad blockers
            const testAd = document.createElement('div');
            testAd.innerHTML = '&nbsp;';
            testAd.className = 'adsbox';
            document.body.appendChild(testAd);
            const isAdBlockerActive = testAd.offsetHeight === 0;
            document.body.removeChild(testAd);

            if (isAdBlockerActive) {
                statusHTML += '<div class="result warning">‚ö†Ô∏è Ad blocker detected - may block Google Analytics</div>';
            } else {
                statusHTML += '<div class="result success">‚úÖ No ad blocker detected</div>';
            }

            statusDiv.innerHTML = statusHTML;
        }

        function testPageView() {
            addResult('Testing page view tracking...', 'info');

            if (typeof window.gtag === 'function') {
                window.gtag('event', 'page_view', {
                    page_title: 'Analytics Test Page',
                    page_location: window.location.href,
                    event_category: 'test',
                    event_label: 'page_view_test'
                });
                addResult('Page view event sent to Google Analytics', 'success');
            } else {
                addResult('Cannot send page view - gtag not available', 'error');
            }
        }

        function testCustomEvent() {
            addResult('Testing custom event tracking...', 'info');

            if (typeof window.gtag === 'function') {
                window.gtag('event', 'test_custom_event', {
                    event_category: 'test',
                    event_label: 'custom_event_test',
                    value: 1,
                    custom_parameter: 'test_value'
                });
                addResult('Custom event sent to Google Analytics', 'success');
            } else {
                addResult('Cannot send custom event - gtag not available', 'error');
            }
        }

        function testUserInteraction() {
            addResult('Testing user interaction tracking...', 'info');

            if (typeof window.gtag === 'function') {
                window.gtag('event', 'user_interaction', {
                    event_category: 'engagement',
                    event_label: 'button_click',
                    interaction_type: 'button_click',
                    target_id: 'test_button'
                });
                addResult('User interaction event sent to Google Analytics', 'success');
            } else {
                addResult('Cannot send user interaction - gtag not available', 'error');
            }
        }

        function testFormSubmission() {
            addResult('Testing form submission tracking...', 'info');

            if (typeof window.gtag === 'function') {
                window.gtag('event', 'form_submission', {
                    event_category: 'forms',
                    event_label: 'test_form',
                    form_type: 'test_form',
                    success: true
                });
                addResult('Form submission event sent to Google Analytics', 'success');
            } else {
                addResult('Cannot send form submission - gtag not available', 'error');
            }
        }

        function showDebugInfo() {
            addResult('=== DEBUG INFORMATION ===', 'info');
            addResult(`URL: ${window.location.href}`, 'info');
            addResult(`User Agent: ${navigator.userAgent}`, 'info');
            addResult(`Timestamp: ${new Date().toISOString()}`, 'info');

            if (window.dataLayer) {
                addResult(`Data Layer Length: ${window.dataLayer.length}`, 'info');
                addResult(`Data Layer Content: ${JSON.stringify(window.dataLayer, null, 2)}`, 'info');
            }

            if (typeof window.gtag === 'function') {
                addResult('gtag function is available', 'success');
            } else {
                addResult('gtag function is NOT available', 'error');
            }
        }

        function clearResults() {
            document.getElementById('results').innerHTML = '';
            testResults = [];
        }

        function runAllTests() {
            addResult('Running all analytics tests...', 'info');
            testPageView();
            setTimeout(() => testCustomEvent(), 500);
            setTimeout(() => testUserInteraction(), 1000);
            setTimeout(() => testFormSubmission(), 1500);
            setTimeout(() => {
                addResult('All tests completed! Check Google Analytics Real-Time reports.', 'success');
            }, 2000);
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function () {
            checkAnalyticsStatus();
            addResult('Analytics test page loaded', 'success');
        });

        // Check status every 5 seconds
        setInterval(checkAnalyticsStatus, 5000);
    </script>
</body>

</html>